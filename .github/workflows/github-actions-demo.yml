# name: GitHub Actions Demo
# run-name: ${{ github.actor }} is testing out GitHub Actions ğŸš€
# on: [push]
# jobs:
#   Explore-GitHub-Actions:
#     runs-on: ubuntu-latest
#     environment: ENV_TEST
#     env:
#       HELLO: "Hello"
#     steps:
#       - run: echo " ${{ env.HELLO }} vÃ  mysql pass${{ secrets.MYSQL_PASSWORD }} vÃ  ${{ secrets.TEST }}  event."
#       - run: echo "ğŸ‰ The job was automatically triggered by a ${{ github.event_name }} event."
#       - run: echo "ğŸ§ This job is now running on a ${{ runner.os }} server hosted by GitHub!"
#       - run: echo "ğŸ” The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."
#       - name: Check out repository code
#         uses: actions/checkout@v5
#       - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
#       - run: echo "ğŸ–¥ï¸ The workflow is now ready to test your code on the runner."
#       - name: List files in the repository
#         run: |
#           ls ${{ github.workspace }}
#       - name: Create a new file
#         run : touch github-action-file.txt
#       - name: Again list files in the repository
#         run: |
#           ls ${{ github.workspace }}
#       - run: echo "ğŸ This job's status is ${{ job.status }}."
#   test-2:
#     runs-on: ubuntu-latest
#     steps:
#       - run: echo "This is the second job."
#       - run: echo "This job's status is ${{ job.status }}."
name: learn-github-actions
run-name: ${{ github.actor }} is learning GitHub Actions
on: [push]
# jobs:
#   job1: # TÃªn job nÃ y lÃ  'job1'
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v5
#       - run: mkdir build && echo "hello" > build/test.txt # Táº¡o thá»­ 1 file

#       - name: Upload Artifact
#         uses: actions/upload-artifact@v4
#         with:
#           name: my-packages # Äáº·t tÃªn á»Ÿ Ä‘Ã¢y
#           path: build/      # ThÆ° má»¥c muá»‘n gá»­i Ä‘i
#   job2:
#     needs: job1 # QUAN TRá»ŒNG: Báº£o Job 2 Ä‘á»£i Job 1 lÃ m xong Ä‘Ã£!
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v5

#       - name: Download Artifact
#         uses: actions/download-artifact@v4
#         with:
#           name: my-packages # Pháº£i trÃ¹ng khá»›p 100% tÃªn á»Ÿ trÃªn
#           path: build/      # NÆ¡i muá»‘n táº£i vá» mÃ¡y 2

#       - run: cat build/test.txt # Kiá»ƒm tra xem file Ä‘Ã£ sang chÆ°a
jobs:
  check-bats-version:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v5
      - uses: actions/setup-node@v4
        with:
          node-version: '20'
      - run: npm install -g bats
      - run: bats -v
      - run: ls
      - name: Upload node_modules
        uses: actions/upload-artifact@v4
        with:
          name: my-packages
          path: package.json
  install-npm:
    needs: check-bats-version
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v5
      - name: Download node_modules
        uses: actions/download-artifact@v4
        with:
          name: my-packages
          path: store
      - run: ls 
      - run: cat store/package.json